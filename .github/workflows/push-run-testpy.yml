name: Action To Run test.py
run-name: ${{ github.actor }} run of Test.py Action Demo
on: [push]
jobs:
  Example-Action:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: tj-actions/changed-files@v33
        id: changed-files
      - uses: actions/setup-python@v4
        with:
          python-version: "3.8"
      - name: Install dependencies
        run: python -m pip install -r requirements.txt
      - name: Get Variables
        run: |
           for line in $(cat config.conf); do
             echo $line >> $GITHUB_ENV
           done

       - run: |
           cd ./Code/Backend
           touch changed-file-list.txt
          for file in ${{ steps.changed-files.outputs.all_changed_files }}; do
            echo "$file"
            echo "$file" >> changed-file-list.txt
          done
          touch Traceability_Report.txt
          python test.py $sourcePath $targetList $outputFile $targetThreshold $targetSourceString $targetString $targetSourceValue
      - name: Upload changed files list
        uses: actions/upload-artifact@v3
        with:
          name: Traceability Report
          path: Code/Backend/Traceability_Report.txt
